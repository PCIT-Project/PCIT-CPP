def std = @import("std");
def build_exp = @import("std_exp/building.pthr");


func entry = () #entry -> UI8 {
	build_exp.setOutput(std.build.Output.PIR);
	// build_exp.setNumThreads(12);

	// build_exp.addStdLib("../extern/Panther-std/std/".* as [Char:*]); // shipped path
	// build_exp.addStdLib("../../Panther-std/std".* as [Char:*]);


	const test_package = new build_exp.Package(
		path     : "./".* as [Char:*],
		name     : "test".* as [Char:*],
		warnings : new @build.PackageWarningSettings{
			methodCallOnNonMethod        = true,
			deleteMovedFromExpr          = true,
			deleteTriviallyDeletableType = false, // TODO(FUTURE): set back to true
			constexprIfCond              = true,
			alreadyUnsafe                = true,
			experimentalF80              = true,
		},
	);
	test_package.addSourceFile("test.pthr".* as [Char:*]);
	// test_package.addSourceFile("StaticArrayList.pthr".* as [Char:*]);
	// test_package.addSourceFile("NonTrivial.pthr".* as [Char:*]);

	// @buildAddCHeaderFile("test.h".* as [Char:*], true);
	
	return 0;
}